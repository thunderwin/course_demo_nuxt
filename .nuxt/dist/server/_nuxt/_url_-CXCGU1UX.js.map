{"version":3,"file":"_url_-CXCGU1UX.js","sources":["../../../../pages/blog/[url].vue"],"sourcesContent":["<template>\n  <div class=\"article-container\">\n    <!-- 返回按钮 -->\n    <div class=\"navigation-bar\">\n      <button @click=\"goBack\" class=\"glass-card back-btn\">\n        <span class=\"back-arrow\">←</span>\n        <span>返回列表</span>\n      </button>\n    </div>\n\n    <!-- 加载状态 -->\n    <div v-if=\"pending\" class=\"loading-section\">\n      <div class=\"glass-card loading-card\">\n        <div class=\"loading-spinner\"></div>\n        <p>正在加载文章内容...</p>\n      </div>\n    </div>\n\n    <!-- 错误状态 -->\n    <div v-else-if=\"error\" class=\"error-section\">\n      <div class=\"glass-card error-card\">\n        <div class=\"error-icon\">❌</div>\n        <h3>加载失败</h3>\n        <p>{{ error.message || '获取文章内容时出现问题' }}</p>\n        <button @click=\"refresh()\" class=\"retry-btn\">\n          🔄 重试\n        </button>\n      </div>\n    </div>\n\n    <!-- 文章内容 -->\n    <article v-else-if=\"article\" class=\"article-section\">\n      <!-- 文章头部 -->\n      <header class=\"glass-card article-header\">\n        <h1 class=\"article-title\">{{ article.title }}</h1>\n        \n        <!-- 文章元信息 -->\n        <div class=\"article-meta\">\n          <div class=\"meta-row\">\n            <div class=\"meta-item\">\n              <span class=\"meta-icon\">👤</span>\n              <span class=\"meta-label\">作者:</span>\n              <span class=\"meta-value\">{{ article.author }}</span>\n            </div>\n            <div class=\"meta-item\">\n              <span class=\"meta-icon\">📅</span>\n              <span class=\"meta-label\">发布:</span>\n              <span class=\"meta-value\">{{ formatDate(article.publishedAt) }}</span>\n            </div>\n          </div>\n          <div class=\"meta-row\">\n            <div class=\"meta-item\">\n              <span class=\"meta-icon\">🕐</span>\n              <span class=\"meta-label\">创建:</span>\n              <span class=\"meta-value\">{{ formatDate(article.createdAt) }}</span>\n            </div>\n            <div class=\"meta-item\">\n              <span class=\"meta-icon\">📊</span>\n              <span class=\"meta-label\">字数:</span>\n              <span class=\"meta-value\">{{ getWordCount(article.content) }} 字</span>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <!-- 文章正文 -->\n      <div class=\"glass-card article-content\">\n        <div class=\"content-wrapper\" v-html=\"formatContent(article.content)\"></div>\n      </div>\n\n      <!-- 文章底部操作 -->\n      <footer class=\"glass-card article-footer\">\n        <div class=\"footer-actions\">\n          <button @click=\"goBack\" class=\"action-btn primary\">\n            <span class=\"btn-icon\">📝</span>\n            <span>返回列表</span>\n          </button>\n          <button @click=\"shareArticle\" class=\"action-btn secondary\">\n            <span class=\"btn-icon\">📤</span>\n            <span>分享文章</span>\n          </button>\n        </div>\n        \n        <div class=\"article-info\">\n          <p class=\"info-text\">\n            感谢您的阅读！如果觉得文章不错，欢迎分享给朋友。\n          </p>\n        </div>\n      </footer>\n    </article>\n\n    <!-- 文章不存在 -->\n    <div v-else class=\"not-found-section\">\n      <div class=\"glass-card not-found-card\">\n        <div class=\"not-found-icon\">📄</div>\n        <h3>文章不存在</h3>\n        <p>抱歉，您要查看的文章可能已被删除或不存在。</p>\n        <button @click=\"goBack\" class=\"back-home-btn\">\n          🏠 返回首页\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n// 获取路由参数\nconst route = useRoute()\nconst articleId = route.params.url\n\n// 页面元信息设置（动态）\nconst { data: article, pending, error, refresh } = await useLazyFetch(`/articles/${articleId}`, {\n  server: false, // 在客户端获取数据\n  baseURL: 'http://localhost:7000', // 后端服务器地址\n  transform: (data) => {\n    // 数据转换：提取文章数据\n    return data.success ? data.data : null\n  }\n})\n\n// 动态设置页面标题和描述\nwatch(article, (newArticle) => {\n  if (newArticle) {\n    useHead({\n      title: `${newArticle.title} - 我的博客`,\n      meta: [\n        { \n          name: 'description', \n          content: getExcerpt(newArticle.content, 160) \n        },\n        { \n          property: 'og:title', \n          content: newArticle.title \n        },\n        { \n          property: 'og:description', \n          content: getExcerpt(newArticle.content, 160) \n        }\n      ]\n    })\n  }\n}, { immediate: true })\n\n/**\n * 返回上一页或文章列表\n */\nconst goBack = () => {\n  // 如果有历史记录，返回上一页；否则跳转到博客列表\n  if (window.history.length > 1) {\n    window.history.back()\n  } else {\n    navigateTo('/blog')\n  }\n}\n\n/**\n * 分享文章功能\n */\nconst shareArticle = async () => {\n  if (navigator.share && article.value) {\n    try {\n      await navigator.share({\n        title: article.value.title,\n        text: getExcerpt(article.value.content, 100),\n        url: window.location.href\n      })\n    } catch (error) {\n      // 分享取消或失败，复制链接到剪贴板\n      copyToClipboard()\n    }\n  } else {\n    // 不支持原生分享，复制链接到剪贴板\n    copyToClipboard()\n  }\n}\n\n/**\n * 复制链接到剪贴板\n */\nconst copyToClipboard = async () => {\n  try {\n    await navigator.clipboard.writeText(window.location.href)\n    alert('✅ 文章链接已复制到剪贴板！')\n  } catch (error) {\n    console.error('复制失败:', error)\n    alert('❌ 复制失败，请手动复制链接')\n  }\n}\n\n/**\n * 获取文章摘要\n * @param {string} content - 文章内容\n * @param {number} limit - 字符限制\n * @return {string} 文章摘要\n */\nconst getExcerpt = (content, limit = 150) => {\n  if (!content) return '暂无内容...'\n  // 移除HTML标签并截取指定长度\n  const plainText = content.replace(/<[^>]*>/g, '')\n  return plainText.length > limit ? plainText.substring(0, limit) + '...' : plainText\n}\n\n/**\n * 格式化文章内容，支持简单的HTML渲染\n * @param {string} content - 原始内容\n * @return {string} 格式化后的内容\n */\nconst formatContent = (content) => {\n  if (!content) return '暂无内容'\n  \n  // 将换行符转换为HTML换行\n  let formattedContent = content.replace(/\\n/g, '<br>')\n  \n  // 简单的Markdown样式支持\n  formattedContent = formattedContent\n    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>') // 粗体\n    .replace(/\\*(.*?)\\*/g, '<em>$1</em>') // 斜体\n    .replace(/`(.*?)`/g, '<code>$1</code>') // 行内代码\n  \n  return formattedContent\n}\n\n/**\n * 计算文章字数\n * @param {string} content - 文章内容\n * @return {number} 字数\n */\nconst getWordCount = (content) => {\n  if (!content) return 0\n  // 移除HTML标签后计算字符数\n  const plainText = content.replace(/<[^>]*>/g, '')\n  return plainText.length\n}\n\n/**\n * 格式化日期显示\n * @param {string} dateString - 日期字符串\n * @return {string} 格式化后的日期\n */\nconst formatDate = (dateString) => {\n  if (!dateString) return '未知日期'\n  \n  const date = new Date(dateString)\n  const now = new Date()\n  const diffTime = Math.abs(now - date)\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n  \n  // 如果是今天\n  if (diffDays === 1) {\n    return `今天 ${date.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })}`\n  }\n  // 如果是一周内\n  else if (diffDays <= 7) {\n    return `${diffDays - 1}天前`\n  }\n  // 显示完整日期和时间\n  else {\n    return date.toLocaleString('zh-CN', { \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    })\n  }\n}\n</script>\n\n<style scoped>\n/* 容器样式 */\n.article-container {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 2rem 1rem;\n}\n\n/* 液体玻璃效果基础样式 */\n.glass-card {\n  background: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(10px);\n  border-radius: 20px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n}\n\n/* 导航栏 */\n.navigation-bar {\n  margin-bottom: 2rem;\n}\n\n.back-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.8rem 1.5rem;\n  color: white;\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n}\n\n.back-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n  transform: translateX(-5px);\n}\n\n.back-arrow {\n  font-size: 1.2rem;\n  transition: transform 0.3s ease;\n}\n\n.back-btn:hover .back-arrow {\n  transform: translateX(-3px);\n}\n\n/* 加载状态 */\n.loading-section {\n  text-align: center;\n  margin: 3rem 0;\n}\n\n.loading-card {\n  padding: 3rem 2rem;\n  max-width: 400px;\n  margin: 0 auto;\n  color: white;\n}\n\n.loading-spinner {\n  width: 50px;\n  height: 50px;\n  border: 4px solid rgba(255, 255, 255, 0.3);\n  border-top: 4px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* 错误状态 */\n.error-section {\n  text-align: center;\n  margin: 3rem 0;\n}\n\n.error-card {\n  padding: 3rem 2rem;\n  max-width: 400px;\n  margin: 0 auto;\n  color: white;\n}\n\n.error-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n.retry-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 0.8rem 1.5rem;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-top: 1rem;\n}\n\n.retry-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n/* 文章区域 */\n.article-section {\n  max-width: 800px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n/* 文章头部 */\n.article-header {\n  padding: 2.5rem;\n  text-align: center;\n  color: white;\n}\n\n.article-title {\n  font-size: 2.5rem;\n  font-weight: 700;\n  margin: 0 0 2rem 0;\n  line-height: 1.2;\n  background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n/* 文章元信息 */\n.article-meta {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.meta-row {\n  display: flex;\n  justify-content: center;\n  gap: 2rem;\n  flex-wrap: wrap;\n}\n\n.meta-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.95rem;\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.meta-icon {\n  font-size: 1.1rem;\n}\n\n.meta-label {\n  font-weight: 500;\n}\n\n.meta-value {\n  color: rgba(255, 255, 255, 0.9);\n}\n\n/* 文章内容 */\n.article-content {\n  padding: 3rem;\n  color: white;\n}\n\n.content-wrapper {\n  font-size: 1.1rem;\n  line-height: 1.8;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n/* 内容样式 */\n.content-wrapper :deep(strong) {\n  color: white;\n  font-weight: 600;\n}\n\n.content-wrapper :deep(em) {\n  color: rgba(255, 255, 255, 0.8);\n  font-style: italic;\n}\n\n.content-wrapper :deep(code) {\n  background: rgba(255, 255, 255, 0.1);\n  padding: 0.2rem 0.4rem;\n  border-radius: 4px;\n  font-family: monospace;\n  font-size: 0.9em;\n}\n\n/* 文章底部 */\n.article-footer {\n  padding: 2.5rem;\n  text-align: center;\n  color: white;\n}\n\n.footer-actions {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n}\n\n.action-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.8rem 1.5rem;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 1rem;\n}\n\n.action-btn.primary {\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n.action-btn.primary:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.action-btn.secondary {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.action-btn.secondary:hover {\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n}\n\n.btn-icon {\n  font-size: 1.1rem;\n}\n\n.article-info {\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding-top: 1.5rem;\n}\n\n.info-text {\n  color: rgba(255, 255, 255, 0.7);\n  margin: 0;\n  font-size: 0.95rem;\n}\n\n/* 404状态 */\n.not-found-section {\n  text-align: center;\n  margin: 3rem 0;\n}\n\n.not-found-card {\n  padding: 4rem 2rem;\n  max-width: 400px;\n  margin: 0 auto;\n  color: white;\n}\n\n.not-found-icon {\n  font-size: 4rem;\n  margin-bottom: 1rem;\n}\n\n.back-home-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 1rem 2rem;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin-top: 1.5rem;\n  font-size: 1rem;\n}\n\n.back-home-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .article-container {\n    padding: 1rem 0.5rem;\n  }\n  \n  .article-title {\n    font-size: 2rem;\n  }\n  \n  .article-header {\n    padding: 2rem 1.5rem;\n  }\n  \n  .article-content {\n    padding: 2rem 1.5rem;\n  }\n  \n  .article-footer {\n    padding: 2rem 1.5rem;\n  }\n  \n  .meta-row {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n  \n  .footer-actions {\n    flex-direction: column;\n    gap: 1rem;\n  }\n  \n  .action-btn {\n    width: 100%;\n    justify-content: center;\n  }\n  \n  .content-wrapper {\n    font-size: 1rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .article-title {\n    font-size: 1.75rem;\n  }\n  \n  .back-btn {\n    padding: 0.6rem 1rem;\n    font-size: 0.9rem;\n  }\n}\n</style>\n"],"names":["_withAsyncContext","_ssrRenderAttrs","_mergeProps","_unref","_ssrInterpolate"],"mappings":"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"}