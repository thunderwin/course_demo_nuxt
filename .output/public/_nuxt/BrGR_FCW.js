import{_ as y,r,f as _,g as S,c as u,a as t,h as w,i as x,j as p,v as f,u as s,t as g,n as I,o as d}from"./CGX_HFdr.js";import{u as T}from"./D4Z7RUcX.js";const k=window.setInterval,D={class:"admin-container"},C={class:"form-container glass-card"},V={class:"form-group"},U={class:"form-group"},q={class:"form-group"},A={class:"form-group"},B={class:"time-display glass-input"},M={class:"form-actions"},N=["disabled"],O={key:0},j={key:1},z={__name:"admin",setup(E){T({title:"文章发布管理 - 博客后台",meta:[{name:"description",content:"博客文章发布和管理页面"}]});const a=r({title:"",content:"",author:""}),c=r(new Date),i=r(!1),o=r(null);let m=null;_(()=>{m=k(()=>{c.value=new Date},1e3)}),S(()=>{m&&clearInterval(m)});const b=l=>l.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),h=async()=>{try{i.value=!0,o.value=null;const l={title:a.value.title,content:a.value.content,author:a.value.author,createdAt:c.value.toISOString(),publishedAt:new Date().toISOString()},e=await $fetch("http://localhost:7000/upload",{method:"POST",body:l,headers:{"Content-Type":"application/json"}});o.value={type:"success",message:"文章发布成功！"},v(),setTimeout(()=>{o.value=null},3e3)}catch(l){console.error("文章发布失败:",l),o.value={type:"error",message:"文章发布失败，请重试。"},setTimeout(()=>{o.value=null},5e3)}finally{i.value=!1}},v=()=>{a.value={title:"",content:"",author:""},o.value=null};return(l,e)=>(d(),u("div",D,[e[7]||(e[7]=t("div",{class:"page-header glass-card"},[t("h1",{class:"title"},"文章发布管理"),t("p",{class:"subtitle"},"创建和发布您的博客文章")],-1)),t("div",C,[t("form",{onSubmit:x(h,["prevent"]),class:"article-form"},[t("div",V,[e[3]||(e[3]=t("label",{for:"title",class:"form-label"},"文章标题",-1)),p(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=n=>s(a).title=n),type:"text",class:"form-input glass-input",placeholder:"请输入文章标题...",required:""},null,512),[[f,s(a).title]])]),t("div",U,[e[4]||(e[4]=t("label",{for:"author",class:"form-label"},"作者",-1)),p(t("input",{id:"author","onUpdate:modelValue":e[1]||(e[1]=n=>s(a).author=n),type:"text",class:"form-input glass-input",placeholder:"请输入作者姓名...",required:""},null,512),[[f,s(a).author]])]),t("div",q,[e[5]||(e[5]=t("label",{for:"content",class:"form-label"},"文章内容",-1)),p(t("textarea",{id:"content","onUpdate:modelValue":e[2]||(e[2]=n=>s(a).content=n),class:"form-textarea glass-input",placeholder:"请输入文章内容...",rows:"12",required:""},null,512),[[f,s(a).content]])]),t("div",A,[e[6]||(e[6]=t("label",{class:"form-label"},"创建时间",-1)),t("div",B,g(b(s(c))),1)]),t("div",M,[t("button",{type:"submit",class:"submit-btn glass-btn",disabled:s(i)},[s(i)?(d(),u("span",j,"发布中...")):(d(),u("span",O,"发布文章"))],8,N),t("button",{type:"button",onClick:v,class:"reset-btn glass-btn-secondary"}," 重置表单 ")])],32)]),s(o)?(d(),u("div",{key:0,class:I(["status-message",s(o).type])},g(s(o).message),3)):w("",!0)]))}},L=y(z,[["__scopeId","data-v-7ecbed15"]]);export{L as default};
