import{_ as x,l as T,m as $,p as L,c as i,a as s,u as n,t as o,q as D,o as l}from"./CGX_HFdr.js";import{u as B}from"./DKNMUz-P.js";import{u as H}from"./D4Z7RUcX.js";const M={class:"article-container"},R={key:0,class:"loading-section"},z={key:1,class:"error-section"},I={class:"glass-card error-card"},N={key:2,class:"article-section"},E={class:"glass-card article-header"},S={class:"article-title"},V={class:"article-meta"},q={class:"meta-row"},F={class:"meta-item"},G={class:"meta-value"},Q={class:"meta-item"},U={class:"meta-value"},W={class:"meta-row"},j={class:"meta-item"},A={class:"meta-value"},J={class:"meta-item"},K={class:"meta-value"},O={class:"glass-card article-content"},P=["innerHTML"],X={key:3,class:"not-found-section"},Y={__name:"[url]",async setup(Z){let c,m;const b=T().params.url,{data:a,pending:y,error:g,refresh:_}=([c,m]=$(()=>B(`/articles/${b}`,{server:!1,baseURL:"http://localhost:7000",transform:e=>e.success?e.data:null},"$VRerHQGuIR")),c=await c,m(),c);L(a,e=>{e&&H({title:`${e.title} - 我的博客`,meta:[{name:"description",content:u(e.content,160)},{property:"og:title",content:e.title},{property:"og:description",content:u(e.content,160)}]})},{immediate:!0});const d=()=>{window.history.length>1?window.history.back():D("/blog")},w=async()=>{if(navigator.share&&a.value)try{await navigator.share({title:a.value.title,text:u(a.value.content,100),url:window.location.href})}catch{v()}else v()},v=async()=>{try{await navigator.clipboard.writeText(window.location.href),alert("✅ 文章链接已复制到剪贴板！")}catch(e){console.error("复制失败:",e),alert("❌ 复制失败，请手动复制链接")}},u=(e,t=150)=>{if(!e)return"暂无内容...";const r=e.replace(/<[^>]*>/g,"");return r.length>t?r.substring(0,t)+"...":r},h=e=>{if(!e)return"暂无内容";let t=e.replace(/\n/g,"<br>");return t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>"),t},k=e=>e?e.replace(/<[^>]*>/g,"").length:0,f=e=>{if(!e)return"未知日期";const t=new Date(e),C=Math.abs(new Date-t),p=Math.ceil(C/(1e3*60*60*24));return p===1?`今天 ${t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}`:p<=7?`${p-1}天前`:t.toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(e,t)=>(l(),i("div",M,[s("div",{class:"navigation-bar"},[s("button",{onClick:d,class:"glass-card back-btn"},t[1]||(t[1]=[s("span",{class:"back-arrow"},"←",-1),s("span",null,"返回列表",-1)]))]),n(y)?(l(),i("div",R,t[2]||(t[2]=[s("div",{class:"glass-card loading-card"},[s("div",{class:"loading-spinner"}),s("p",null,"正在加载文章内容...")],-1)]))):n(g)?(l(),i("div",z,[s("div",I,[t[3]||(t[3]=s("div",{class:"error-icon"},"❌",-1)),t[4]||(t[4]=s("h3",null,"加载失败",-1)),s("p",null,o(n(g).message||"获取文章内容时出现问题"),1),s("button",{onClick:t[0]||(t[0]=r=>n(_)()),class:"retry-btn"}," 🔄 重试 ")])])):n(a)?(l(),i("article",N,[s("header",E,[s("h1",S,o(n(a).title),1),s("div",V,[s("div",q,[s("div",F,[t[5]||(t[5]=s("span",{class:"meta-icon"},"👤",-1)),t[6]||(t[6]=s("span",{class:"meta-label"},"作者:",-1)),s("span",G,o(n(a).author),1)]),s("div",Q,[t[7]||(t[7]=s("span",{class:"meta-icon"},"📅",-1)),t[8]||(t[8]=s("span",{class:"meta-label"},"发布:",-1)),s("span",U,o(f(n(a).publishedAt)),1)])]),s("div",W,[s("div",j,[t[9]||(t[9]=s("span",{class:"meta-icon"},"🕐",-1)),t[10]||(t[10]=s("span",{class:"meta-label"},"创建:",-1)),s("span",A,o(f(n(a).createdAt)),1)]),s("div",J,[t[11]||(t[11]=s("span",{class:"meta-icon"},"📊",-1)),t[12]||(t[12]=s("span",{class:"meta-label"},"字数:",-1)),s("span",K,o(k(n(a).content))+" 字",1)])])])]),s("div",O,[s("div",{class:"content-wrapper",innerHTML:h(n(a).content)},null,8,P)]),s("footer",{class:"glass-card article-footer"},[s("div",{class:"footer-actions"},[s("button",{onClick:d,class:"action-btn primary"},t[13]||(t[13]=[s("span",{class:"btn-icon"},"📝",-1),s("span",null,"返回列表",-1)])),s("button",{onClick:w,class:"action-btn secondary"},t[14]||(t[14]=[s("span",{class:"btn-icon"},"📤",-1),s("span",null,"分享文章",-1)]))]),t[15]||(t[15]=s("div",{class:"article-info"},[s("p",{class:"info-text"}," 感谢您的阅读！如果觉得文章不错，欢迎分享给朋友。 ")],-1))])])):(l(),i("div",X,[s("div",{class:"glass-card not-found-card"},[t[16]||(t[16]=s("div",{class:"not-found-icon"},"📄",-1)),t[17]||(t[17]=s("h3",null,"文章不存在",-1)),t[18]||(t[18]=s("p",null,"抱歉，您要查看的文章可能已被删除或不存在。",-1)),s("button",{onClick:d,class:"back-home-btn"}," 🏠 返回首页 ")])]))]))}},nt=x(Y,[["__scopeId","data-v-53b85787"]]);export{nt as default};
