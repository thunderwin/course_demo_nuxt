import{_ as x,l as T,m as $,p as L,c as i,a as s,u as n,t as o,q as D,o as l}from"./CGX_HFdr.js";import{u as B}from"./DKNMUz-P.js";import{u as H}from"./D4Z7RUcX.js";const M={class:"article-container"},R={key:0,class:"loading-section"},z={key:1,class:"error-section"},I={class:"glass-card error-card"},N={key:2,class:"article-section"},E={class:"glass-card article-header"},S={class:"article-title"},V={class:"article-meta"},q={class:"meta-row"},F={class:"meta-item"},G={class:"meta-value"},Q={class:"meta-item"},U={class:"meta-value"},W={class:"meta-row"},j={class:"meta-item"},A={class:"meta-value"},J={class:"meta-item"},K={class:"meta-value"},O={class:"glass-card article-content"},P=["innerHTML"],X={key:3,class:"not-found-section"},Y={__name:"[url]",async setup(Z){let c,m;const b=T().params.url,{data:a,pending:y,error:g,refresh:_}=([c,m]=$(()=>B(`/articles/${b}`,{server:!1,baseURL:"http://localhost:7000",transform:e=>e.success?e.data:null},"$VRerHQGuIR")),c=await c,m(),c);L(a,e=>{e&&H({title:`${e.title} - æˆ‘çš„åšå®¢`,meta:[{name:"description",content:u(e.content,160)},{property:"og:title",content:e.title},{property:"og:description",content:u(e.content,160)}]})},{immediate:!0});const d=()=>{window.history.length>1?window.history.back():D("/blog")},w=async()=>{if(navigator.share&&a.value)try{await navigator.share({title:a.value.title,text:u(a.value.content,100),url:window.location.href})}catch{v()}else v()},v=async()=>{try{await navigator.clipboard.writeText(window.location.href),alert("âœ… æ–‡ç« é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼")}catch(e){console.error("å¤åˆ¶å¤±è´¥:",e),alert("âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥")}},u=(e,t=150)=>{if(!e)return"æš‚æ— å†…å®¹...";const r=e.replace(/<[^>]*>/g,"");return r.length>t?r.substring(0,t)+"...":r},h=e=>{if(!e)return"æš‚æ— å†…å®¹";let t=e.replace(/\n/g,"<br>");return t=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>"),t},k=e=>e?e.replace(/<[^>]*>/g,"").length:0,f=e=>{if(!e)return"æœªçŸ¥æ—¥æœŸ";const t=new Date(e),C=Math.abs(new Date-t),p=Math.ceil(C/(1e3*60*60*24));return p===1?`ä»Šå¤© ${t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}`:p<=7?`${p-1}å¤©å‰`:t.toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(e,t)=>(l(),i("div",M,[s("div",{class:"navigation-bar"},[s("button",{onClick:d,class:"glass-card back-btn"},t[1]||(t[1]=[s("span",{class:"back-arrow"},"â†",-1),s("span",null,"è¿”å›åˆ—è¡¨",-1)]))]),n(y)?(l(),i("div",R,t[2]||(t[2]=[s("div",{class:"glass-card loading-card"},[s("div",{class:"loading-spinner"}),s("p",null,"æ­£åœ¨åŠ è½½æ–‡ç« å†…å®¹...")],-1)]))):n(g)?(l(),i("div",z,[s("div",I,[t[3]||(t[3]=s("div",{class:"error-icon"},"âŒ",-1)),t[4]||(t[4]=s("h3",null,"åŠ è½½å¤±è´¥",-1)),s("p",null,o(n(g).message||"è·å–æ–‡ç« å†…å®¹æ—¶å‡ºç°é—®é¢˜"),1),s("button",{onClick:t[0]||(t[0]=r=>n(_)()),class:"retry-btn"}," ğŸ”„ é‡è¯• ")])])):n(a)?(l(),i("article",N,[s("header",E,[s("h1",S,o(n(a).title),1),s("div",V,[s("div",q,[s("div",F,[t[5]||(t[5]=s("span",{class:"meta-icon"},"ğŸ‘¤",-1)),t[6]||(t[6]=s("span",{class:"meta-label"},"ä½œè€…:",-1)),s("span",G,o(n(a).author),1)]),s("div",Q,[t[7]||(t[7]=s("span",{class:"meta-icon"},"ğŸ“…",-1)),t[8]||(t[8]=s("span",{class:"meta-label"},"å‘å¸ƒ:",-1)),s("span",U,o(f(n(a).publishedAt)),1)])]),s("div",W,[s("div",j,[t[9]||(t[9]=s("span",{class:"meta-icon"},"ğŸ•",-1)),t[10]||(t[10]=s("span",{class:"meta-label"},"åˆ›å»º:",-1)),s("span",A,o(f(n(a).createdAt)),1)]),s("div",J,[t[11]||(t[11]=s("span",{class:"meta-icon"},"ğŸ“Š",-1)),t[12]||(t[12]=s("span",{class:"meta-label"},"å­—æ•°:",-1)),s("span",K,o(k(n(a).content))+" å­—",1)])])])]),s("div",O,[s("div",{class:"content-wrapper",innerHTML:h(n(a).content)},null,8,P)]),s("footer",{class:"glass-card article-footer"},[s("div",{class:"footer-actions"},[s("button",{onClick:d,class:"action-btn primary"},t[13]||(t[13]=[s("span",{class:"btn-icon"},"ğŸ“",-1),s("span",null,"è¿”å›åˆ—è¡¨",-1)])),s("button",{onClick:w,class:"action-btn secondary"},t[14]||(t[14]=[s("span",{class:"btn-icon"},"ğŸ“¤",-1),s("span",null,"åˆ†äº«æ–‡ç« ",-1)]))]),t[15]||(t[15]=s("div",{class:"article-info"},[s("p",{class:"info-text"}," æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼å¦‚æœè§‰å¾—æ–‡ç« ä¸é”™ï¼Œæ¬¢è¿åˆ†äº«ç»™æœ‹å‹ã€‚ ")],-1))])])):(l(),i("div",X,[s("div",{class:"glass-card not-found-card"},[t[16]||(t[16]=s("div",{class:"not-found-icon"},"ğŸ“„",-1)),t[17]||(t[17]=s("h3",null,"æ–‡ç« ä¸å­˜åœ¨",-1)),t[18]||(t[18]=s("p",null,"æŠ±æ­‰ï¼Œæ‚¨è¦æŸ¥çœ‹çš„æ–‡ç« å¯èƒ½å·²è¢«åˆ é™¤æˆ–ä¸å­˜åœ¨ã€‚",-1)),s("button",{onClick:d,class:"back-home-btn"}," ğŸ  è¿”å›é¦–é¡µ ")])]))]))}},nt=x(Y,[["__scopeId","data-v-53b85787"]]);export{nt as default};
